{"componentChunkName":"component---src-templates-notebook-js","path":"/计算机与程序/服务器/通过公网服务器访问内网服务器/","result":{"data":{"markdownRemark":{"html":"<h1 id=\"通过公网服务器访问内网服务器\"><a href=\"#%E9%80%9A%E8%BF%87%E5%85%AC%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AE%BF%E9%97%AE%E5%86%85%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8\" aria-label=\"通过公网服务器访问内网服务器 permalink\" class=\"custom-class\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>通过公网服务器访问内网服务器</h1>\n<h2 id=\"介绍\"><a href=\"#%E4%BB%8B%E7%BB%8D\" aria-label=\"介绍 permalink\" class=\"custom-class\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>介绍</h2>\n<p>使用 <a href=\"https://github.com/fatedier/frp\" target=\"_blank\" rel=\"nofollow\">frp</a> 反向代理进行内网穿透。</p>\n<h2 id=\"步骤\"><a href=\"#%E6%AD%A5%E9%AA%A4\" aria-label=\"步骤 permalink\" class=\"custom-class\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>步骤</h2>\n<h3 id=\"内网机器安装-fpc\"><a href=\"#%E5%86%85%E7%BD%91%E6%9C%BA%E5%99%A8%E5%AE%89%E8%A3%85-fpc\" aria-label=\"内网机器安装 fpc permalink\" class=\"custom-class\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>内网机器安装 fpc</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">wget</span> https://github.com/fatedier/frp/releases/download/v0.30.0/frp_0.30.0_linux_amd64.tar.gz\n<span class=\"token function\">tar</span> -zxvf frp_0.30.0_linux_amd64.tar.gz</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h3 id=\"参考-frp-文档-修改-code-classlanguage-textfrpcinicode-配置\"><a href=\"#%E5%8F%82%E8%80%83-frp-%E6%96%87%E6%A1%A3-%E4%BF%AE%E6%94%B9-code-classlanguage-textfrpcinicode-%E9%85%8D%E7%BD%AE\" aria-label=\"参考 frp 文档 修改 code classlanguage textfrpcinicode 配置 permalink\" class=\"custom-class\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考 <a href=\"https://github.com/fatedier/frp/blob/master/README_zh.md#%E9%80%9A%E8%BF%87-ssh-%E8%AE%BF%E9%97%AE%E5%85%AC%E5%8F%B8%E5%86%85%E7%BD%91%E6%9C%BA%E5%99%A8\" target=\"_blank\" rel=\"nofollow\">frp 文档</a> 修改 <code class=\"language-text\">frpc.ini</code> 配置</h3>\n<div class=\"gatsby-highlight\" data-language=\"ini\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ini line-numbers\"><code class=\"language-ini\"><span class=\"token comment\"># frpc.ini</span>\n<span class=\"token selector\">[common]</span>\n<span class=\"token constant\">server_addr</span> <span class=\"token attr-value\"><span class=\"token punctuation\">=</span> x.x.x.x</span>\n<span class=\"token constant\">server_port</span> <span class=\"token attr-value\"><span class=\"token punctuation\">=</span> 7000</span>\n\n<span class=\"token selector\">[ssh]</span>\n<span class=\"token constant\">type</span> <span class=\"token attr-value\"><span class=\"token punctuation\">=</span> tcp</span>\n<span class=\"token constant\">local_ip</span> <span class=\"token attr-value\"><span class=\"token punctuation\">=</span> 127.0.0.1</span>\n<span class=\"token constant\">local_port</span> <span class=\"token attr-value\"><span class=\"token punctuation\">=</span> 22</span>\n<span class=\"token constant\">remote_port</span> <span class=\"token attr-value\"><span class=\"token punctuation\">=</span> 6000</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"设置-frpc-服务后台运行及开机启动\"><a href=\"#%E8%AE%BE%E7%BD%AE-frpc-%E6%9C%8D%E5%8A%A1%E5%90%8E%E5%8F%B0%E8%BF%90%E8%A1%8C%E5%8F%8A%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8\" aria-label=\"设置 frpc 服务后台运行及开机启动 permalink\" class=\"custom-class\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>设置 frpc 服务后台运行及开机启动</h3>\n<p>在 <code class=\"language-text\">/lib/systemd/system</code> 目录下新建 <code class=\"language-text\">frpc.service</code> 服务配置文件</p>\n<div class=\"gatsby-highlight\" data-language=\"ini\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-ini line-numbers\"><code class=\"language-ini\"><span class=\"token selector\">[Unit]</span>\n<span class=\"token constant\">Description</span> <span class=\"token attr-value\"><span class=\"token punctuation\">=</span> frpc service</span>\n<span class=\"token constant\">After</span> <span class=\"token attr-value\"><span class=\"token punctuation\">=</span> network.target syslog.target</span>\n<span class=\"token constant\">Wants</span> <span class=\"token attr-value\"><span class=\"token punctuation\">=</span> network.target</span>\n\n<span class=\"token selector\">[Service]</span>\n<span class=\"token constant\">Type</span> <span class=\"token attr-value\"><span class=\"token punctuation\">=</span> simple</span>\n<span class=\"token constant\">ExecStart</span> <span class=\"token attr-value\"><span class=\"token punctuation\">=</span> /your/path/frpc -c /your/path/frpc.ini</span>\n\n<span class=\"token selector\">[Install]</span>\n<span class=\"token constant\">WantedBy</span> <span class=\"token attr-value\"><span class=\"token punctuation\">=</span> multi-user.target</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>启动 frpc 服务</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> systemctl start frpc</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>设置开机启动</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> systemctl <span class=\"token builtin class-name\">enable</span> frps</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>重启服务</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> systemctl restart frpc</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>停止服务</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> systemctl stop frpc</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>查看服务日志</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> systemctl status frpc</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h2 id=\"参考资料\"><a href=\"#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99\" aria-label=\"参考资料 permalink\" class=\"custom-class\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考资料</h2>\n<ul>\n<li><a href=\"https://github.com/fatedier/frp/blob/master/README_zh.md\" target=\"_blank\" rel=\"nofollow\">frp 中文文档</a></li>\n<li><a href=\"https://blog.csdn.net/a18838956649/article/details/103075801\" target=\"_blank\" rel=\"nofollow\">FRP内网穿透技术实现对校园网电脑的远程访问</a></li>\n<li><a href=\"https://blog.csdn.net/x7418520/article/details/81077652\" target=\"_blank\" rel=\"nofollow\">Frp后台自动启动的几个方法</a></li>\n</ul>","tableOfContents":"<ul>\n<li>\n<p><a href=\"/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%A8%8B%E5%BA%8F/%E6%9C%8D%E5%8A%A1%E5%99%A8/%E9%80%9A%E8%BF%87%E5%85%AC%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AE%BF%E9%97%AE%E5%86%85%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8/#%E9%80%9A%E8%BF%87%E5%85%AC%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AE%BF%E9%97%AE%E5%86%85%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8\">通过公网服务器访问内网服务器</a></p>\n<ul>\n<li><a href=\"/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%A8%8B%E5%BA%8F/%E6%9C%8D%E5%8A%A1%E5%99%A8/%E9%80%9A%E8%BF%87%E5%85%AC%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AE%BF%E9%97%AE%E5%86%85%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8/#%E4%BB%8B%E7%BB%8D\">介绍</a></li>\n<li>\n<p><a href=\"/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%A8%8B%E5%BA%8F/%E6%9C%8D%E5%8A%A1%E5%99%A8/%E9%80%9A%E8%BF%87%E5%85%AC%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AE%BF%E9%97%AE%E5%86%85%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8/#%E6%AD%A5%E9%AA%A4\">步骤</a></p>\n<ul>\n<li><a href=\"/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%A8%8B%E5%BA%8F/%E6%9C%8D%E5%8A%A1%E5%99%A8/%E9%80%9A%E8%BF%87%E5%85%AC%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AE%BF%E9%97%AE%E5%86%85%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8/#%E5%86%85%E7%BD%91%E6%9C%BA%E5%99%A8%E5%AE%89%E8%A3%85-fpc\">内网机器安装 fpc</a></li>\n<li><a href=\"/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%A8%8B%E5%BA%8F/%E6%9C%8D%E5%8A%A1%E5%99%A8/%E9%80%9A%E8%BF%87%E5%85%AC%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AE%BF%E9%97%AE%E5%86%85%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8/#%E5%8F%82%E8%80%83-frp-%E6%96%87%E6%A1%A3-%E4%BF%AE%E6%94%B9-code-classlanguage-textfrpcinicode-%E9%85%8D%E7%BD%AE\">参考 frp 文档 修改 &#x3C;code class=\"language-text\">frpc.ini&#x3C;/code> 配置</a></li>\n<li><a href=\"/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%A8%8B%E5%BA%8F/%E6%9C%8D%E5%8A%A1%E5%99%A8/%E9%80%9A%E8%BF%87%E5%85%AC%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AE%BF%E9%97%AE%E5%86%85%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8/#%E8%AE%BE%E7%BD%AE-frpc-%E6%9C%8D%E5%8A%A1%E5%90%8E%E5%8F%B0%E8%BF%90%E8%A1%8C%E5%8F%8A%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8\">设置 frpc 服务后台运行及开机启动</a></li>\n</ul>\n</li>\n<li><a href=\"/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E7%A8%8B%E5%BA%8F/%E6%9C%8D%E5%8A%A1%E5%99%A8/%E9%80%9A%E8%BF%87%E5%85%AC%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AE%BF%E9%97%AE%E5%86%85%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8/#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99\">参考资料</a></li>\n</ul>\n</li>\n</ul>"}},"pageContext":{"isCreatedByStatefulCreatePages":false,"title":"通过公网服务器访问内网服务器","tableOfContentsAST":[{"id":"通过公网服务器访问内网服务器","value":"通过公网服务器访问内网服务器","depth":1,"children":[{"id":"介绍","value":"介绍","depth":2},{"id":"步骤","value":"步骤","depth":2,"children":[{"id":"内网机器安装-fpc","value":"内网机器安装 fpc","depth":3},{"id":"参考-frp-文档-修改-code-classlanguage-textfrpcinicode-配置","value":"参考 frp 文档 修改 frpc.ini 配置","depth":3},{"id":"设置-frpc-服务后台运行及开机启动","value":"设置 frpc 服务后台运行及开机启动","depth":3}]}]},{"id":"root-参考资料","value":"","depth":1,"children":[{"id":"参考资料","value":"参考资料","depth":2}]}],"headingIDs":["通过公网服务器访问内网服务器","介绍","步骤","内网机器安装-fpc","参考-frp-文档-修改-code-classlanguage-textfrpcinicode-配置","设置-frpc-服务后台运行及开机启动","参考资料"]}}}