{"version":3,"sources":["webpack:///./src/templates/client-search/index.module.scss","webpack:///./src/templates/client-search/search.worker.js","webpack:///(webpack)/buildin/module.js","webpack:///./src/templates/client-search/search.worker.actions.js","webpack:///./src/templates/client-search/index.js","webpack:///(webpack)/buildin/global.js"],"names":["module","exports","Worker","__webpack_public_path__","webpackPolyfill","deprecate","paths","children","Object","defineProperty","enumerable","get","l","i","MESSAGE_TYPE","getAction","type","payload","SearchTemplate","props","allPageData","pageContext","useState","result","setResult","searchWorker","useRef","useEffect","window","current","SearchWorker","postMessage","addEventListener","e","data","throttledHandleInputChange","throttle","keyword","getSearchAction","className","styl","page","header","autoFocus","searchInput","onChange","persist","target","value","placeholder","length","map","v","key","path","to","empty","g","this","Function"],"mappings":"gFACAA,EAAOC,QAAU,CAAC,KAAO,4BAA4B,OAAS,8BAA8B,YAAc,mCAAmC,OAAS,8BAA8B,MAAQ,+B,qBCD5LD,EAAOC,QAAU,WACf,OAAO,IAAIC,OAAOC,IAA0B,oC,mBCD9CH,EAAOC,QAAU,SAASD,GAoBzB,OAnBKA,EAAOI,kBACXJ,EAAOK,UAAY,aACnBL,EAAOM,MAAQ,GAEVN,EAAOO,WAAUP,EAAOO,SAAW,IACxCC,OAAOC,eAAeT,EAAQ,SAAU,CACvCU,YAAY,EACZC,IAAK,WACJ,OAAOX,EAAOY,KAGhBJ,OAAOC,eAAeT,EAAQ,KAAM,CACnCU,YAAY,EACZC,IAAK,WACJ,OAAOX,EAAOa,KAGhBb,EAAOI,gBAAkB,GAEnBJ,I,+GCpBKc,EACL,OADKA,EAEH,SAMV,SAASC,EAAUC,EAAMC,GACvB,MAAO,CAAED,OAAMC,W,yBCqDFC,UAtDQ,SAAAC,GAAU,IAEvBC,EADgBD,EAAhBE,YACAD,YAFsB,EAGFE,mBAAS,IAA9BC,EAHuB,KAGfC,EAHe,KAIxBC,EAAeC,iBAAO,MAE5BC,qBAAU,WACJC,SACFH,EAAaI,QAAU,IAAIC,IAE3BL,EAAaI,QAAQE,YDbwBhB,EAAUD,ECaIM,IAE3DK,EAAaI,QAAQG,iBAAiB,WAAW,SAAAC,GAC/CT,EAAUS,EAAEC,YAGf,IAEH,IAAMC,EAA6BC,oBAAS,SAASC,GACnDZ,EAAaI,SAAWJ,EAAaI,QAAQE,YDrBlB,SAACM,GAAD,OAAatB,EAAUD,EAAqBuB,GCqBdC,CAAgBD,MACxE,KAAK,GAOR,OACE,yBAAKE,UAAWC,IAAKC,MACnB,wBAAIF,UAAWC,IAAKE,QAApB,SACA,6BACE,2BACE1B,KAAK,OACL2B,WAAS,EACTJ,UAAWC,IAAKI,YAChBC,SAbkB,SAAUZ,GAClCA,EAAEa,UACFX,EAA2BF,EAAEc,OAAOC,QAY9BC,YAAY,WAEd,wBAAIV,UAAWC,IAAKjB,QACjBA,EAAO2B,OAAS,EACb3B,EAAO4B,KAAI,SAAAC,GAAC,OACX,wBACCC,IAAKD,EAAEE,MAEP,kBAAC,OAAD,CAAMC,GAAIH,EAAEE,MAAOF,EAAEE,UAGvB,yBAAKf,UAAWC,IAAKgB,OAArB,kB,mBCvDd,IAAIC,EAGJA,EAAI,WACH,OAAOC,KADJ,GAIJ,IAECD,EAAIA,GAAK,IAAIE,SAAS,cAAb,GACR,MAAO1B,GAEc,iBAAXL,SAAqB6B,EAAI7B,QAOrC5B,EAAOC,QAAUwD","file":"component---src-templates-client-search-index-js-af109e1f2832c786762d.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"index-module--page--3C1-z\",\"header\":\"index-module--header--39KBg\",\"searchInput\":\"index-module--searchInput--2OyVR\",\"result\":\"index-module--result--1YrVS\",\"empty\":\"index-module--empty--2qEY8\"};","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"f6921c8ea99d1d07dc7d.worker.js\");\n};","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","export const MESSAGE_TYPE = {\n  INIT: 'INIT',\n  SEARCH: 'SEARCH',\n}\n\nexport const getInitSearchEngineAction = (data) => getAction(MESSAGE_TYPE.INIT, data)\nexport const getSearchAction = (keyword) => getAction(MESSAGE_TYPE.SEARCH, keyword)\n\nfunction getAction(type, payload) {\n  return { type, payload }\n}\n","import React, { useEffect, useRef, useState } from 'react'\nimport { Link } from 'gatsby'\nimport { throttle } from 'lodash'\nimport SearchWorker from './search.worker'\nimport { getInitSearchEngineAction, getSearchAction } from './search.worker.actions'\n\nimport styl from './index.module.scss'\n\nconst SearchTemplate = props => {\n  const { pageContext } = props\n  const { allPageData } = pageContext\n  const [result, setResult] = useState([])\n  const searchWorker = useRef(null)\n\n  useEffect(() => {\n    if (window) {\n      searchWorker.current = new SearchWorker()\n\n      searchWorker.current.postMessage(getInitSearchEngineAction(allPageData))\n\n      searchWorker.current.addEventListener('message', e => {\n        setResult(e.data)\n      })\n    }\n  }, [])\n\n  const throttledHandleInputChange = throttle(function(keyword) {\n    searchWorker.current && searchWorker.current.postMessage(getSearchAction(keyword))\n  }, 200, true)\n\n  const handleInputChange = function (e) {\n    e.persist()\n    throttledHandleInputChange(e.target.value)\n  }\n\n  return (\n    <div className={styl.page}>\n      <h1 className={styl.header}>ÊêúÁ¥¢ üîç</h1>\n      <div>\n        <input\n          type=\"text\"\n          autoFocus\n          className={styl.searchInput}\n          onChange={handleInputChange}\n          placeholder=\"ËØ∑ËæìÂÖ•ÂÖ≥ÈîÆËØç\"\n        />\n        <ul className={styl.result}>\n          {result.length > 0\n            ? result.map(v =>\n              (<li\n                key={v.path}\n              >\n                <Link to={v.path}>{v.path}</Link>\n              </li>)\n            )\n            : <div className={styl.empty}>no result</div>}\n        </ul>\n      </div>\n    </div>\n  )\n}\n\nexport default SearchTemplate\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n"],"sourceRoot":""}